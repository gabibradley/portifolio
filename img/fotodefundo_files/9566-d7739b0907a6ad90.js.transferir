"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{79566:function(n,e,t){t.d(e,{Z:function(){return U}});var r=t(47568),o=t(7297),a=t(20414),i=t(85893),c=t(67294),s=t(64298),l=t(29689),u=t(27603),d=t(41664),h=t.n(d),p=t(11163),f=(t(60465),t(62830)),m=t.n(f),g=t(8839),x=t(80973),b=t(87204),y=t(67407),v=t(70916),w=t(36808),k=t.n(w),j=function(n){var e=n.children;return"Dexter-approved"===k().get("secretlab")?(0,i.jsx)("div",{className:"labs",children:e}):null},S=t(90452),C=t(60204),I=t(83253),_=t.n(I),P=t(25675),N=t.n(P),A=t(86501),Z=t(85434);function E(){var n=(0,o.Z)(["\n  margin: 5px 0 0;\n  font-size: 1.4rem;\n"]);return E=function(){return n},n}function T(){var n=(0,o.Z)(["\n  .social:hover {\n    background-color: #00ffa9;\n  }\n\n  display: grid;\n  justify-content: center;\n  grid-auto-flow: column;\n  grid-column-gap: 5px;\n  .loginIcon {\n    font-size: 35px;\n  }\n  > button {\n    justify-self: center;\n  }\n"]);return T=function(){return n},n}function M(){var n=(0,o.Z)(["\n  .magic:hover {\n    background-color: #00ffa9;\n  }\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  @media screen and (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n  .loginInput {\n    width: 300px;\n    input {\n      border-radius: 5px;\n      font-size: 16px;\n    }\n  }\n  .box {\n    margin: 0 20px;\n    span {\n      font-weight: bold;\n    }\n  }\n  .socials {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n  .magic {\n    font-size: 14px;\n  }\n"]);return M=function(){return n},n}function R(){var n=(0,o.Z)(["\n  background-color: white;\n  padding: 6px;\n  border: none;\n  border-radius: 5px;\n"]);return R=function(){return n},n}function O(){var n=(0,o.Z)(["\n  background-color: #3c3c3b;\n  color: #00ff00;\n  border: none;\n  border-radius: 5px;\n  padding: 8px 10px;\n  :hover {\n    cursor: pointer;\n  }\n\n  span {\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n  }\n"]);return O=function(){return n},n}var L=u.default.p.withConfig({componentId:"sc-d44d8e5c-0"})(E()),W=u.default.div.withConfig({componentId:"sc-d44d8e5c-1"})(T()),Y=u.default.div.withConfig({componentId:"sc-d44d8e5c-2"})(M()),z=u.default.button.withConfig({componentId:"sc-d44d8e5c-3"})(R()),F=u.default.button.withConfig({componentId:"sc-d44d8e5c-4"})(O()),U=function(n){var e=(0,l.Z)(!1).value,t=(0,y.aF)(),o=t.user,u=t.setUserData,d=(0,c.useState)(!1),f=d[0],w=d[1],k=(0,c.useState)(null),I=k[0],P=k[1],E=(0,c.useState)(""),T=E[0],M=E[1],R=(0,c.useState)(""),O=R[0],U=R[1],G=(0,c.useState)(""),q=G[0],D=G[1],B=(0,c.useState)(!1),H=B[0],J=B[1],X=(0,c.useState)("/"),V=X[0],K=X[1],Q=(0,c.useState)(""),$=Q[0],nn=Q[1],en=(0,c.useState)(""),tn=en[0],rn=en[1],on=(0,c.useState)(""),an=on[0],cn=on[1],sn=(0,c.useState)(!0),ln=sn[0],un=sn[1],dn=(0,s.cI)(),hn=dn.register,pn=dn.handleSubmit,fn=(dn.errors,(0,c.useState)("")),mn=fn[0],gn=fn[1],xn=((0,p.useRouter)(),(0,c.useRef)()),bn=document.getElementById("root"),yn=["https://cdn.hackernoon.com/avatars/robot-a1.png","https://cdn.hackernoon.com/avatars/robot-a2.png","https://cdn.hackernoon.com/avatars/robot-a3.png","https://cdn.hackernoon.com/avatars/robot-a4.png","https://cdn.hackernoon.com/avatars/robot-a5.png","https://cdn.hackernoon.com/avatars/robot-a6.png","https://cdn.hackernoon.com/avatars/robot-b1.png","https://cdn.hackernoon.com/avatars/robot-b2.png","https://cdn.hackernoon.com/avatars/robot-b3.png","https://cdn.hackernoon.com/avatars/robot-b4.png","https://cdn.hackernoon.com/avatars/robot-b5.png","https://cdn.hackernoon.com/avatars/robot-b6.png"],vn=function(n,e){return Math.floor(Math.random()*(e-n+1))+n};if((0,c.useEffect)((function(){var n=new URLSearchParams(window.location.search),e=new URLSearchParams(n),t=e.get("redirect"),r=e.get("action"),a=e.get("emoji"),i=e.get("template"),c=e.get("poll");K(t||"/"),r&&nn(r),a&&cn(a),i&&gn(i),c&&rn(c),o.handle&&(r&&"7"===r&&i?window.open("https://app.hackernoon.com/new?template=".concat(i),"_self"):$&&"8"===$&&tn?window.open("https://app.hackernoon.com/new?poll=".concat(tn),"_self"):window.open("".concat(t).concat(r?"?action=".concat(r):"").concat(a?"&emoji=".concat(a):"3"===r?"#commentSection":""),"_self"))}),[]),!n.fromColorPicker)(location.state||{from:{pathname:"/"}}).from;var wn=function(){var n=(0,r.Z)((function(){var n;return(0,a.__generator)(this,(function(e){return(n=new v.default.auth.GoogleAuthProvider).addScope("https://www.googleapis.com/auth/userinfo.email"),v.default.auth().signInWithPopup(n).then((function(n){var e=n.user;In(e,{})})),[2]}))}));return function(){return n.apply(this,arguments)}}(),kn=function(){var n=(0,r.Z)((function(){var n;return(0,a.__generator)(this,(function(e){return n=new v.default.auth.GithubAuthProvider,v.default.auth().signInWithPopup(n).then((function(n){var e=n.user;In(e,{})})),[2]}))}));return function(){return n.apply(this,arguments)}}(),jn=function(){var n=(0,r.Z)((function(){var n;return(0,a.__generator)(this,(function(e){return n=new v.default.auth.FacebookAuthProvider,v.default.auth().signInWithPopup(n).then((function(n){var e=n.user;In(e,{})})),[2]}))}));return function(){return n.apply(this,arguments)}}(),Sn=function(){var n=(0,r.Z)((function(){var n;return(0,a.__generator)(this,(function(e){return v.default.auth().currentUser,n=new v.default.auth.TwitterAuthProvider,v.default.auth().signInWithPopup(n).then((function(n){var e=n.user;In(e,{})})),[2]}))}));return function(){return n.apply(this,arguments)}}(),Cn=function(){var n=(0,r.Z)((function(){var n,e,t,o,i;return(0,a.__generator)(this,(function(c){switch(c.label){case 0:return(null===(n=window.ethereum)||void 0===n?void 0:n.providers)&&(n=n.providers.find((function(n){return n.isMetaMask}))),n?[4,n.enable()]:(A.toast.error("Please install MetaMask to sign in with your wallet"),[2]);case 1:return c.sent(),e=n.selectedAddress,[4,fetch("https://api.hackernoon.com/getNonceToSign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e})}).then((function(n){return n.json()})).then((function(n){return n.nonce.toString()}))];case 2:return t=c.sent(),[4,n.request({method:"personal_sign",params:["0x".concat((s=t,s.split("").map((function(n){return n.charCodeAt(0).toString(16).padStart(2,"0")})).join(""))),e]})];case 3:return o=c.sent(),[4,fetch("https://api.hackernoon.com/verifySignedMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,signature:o})}).then((function(n){return n.json()})).then((function(n){return n.token}))];case 4:return i=c.sent(),[4,v.default.auth().signInWithCustomToken(i)];case 5:return c.sent().user.getIdToken(!0).then(function(){var n=(0,r.Z)((function(n){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,fetch("https://api.hackernoon.com/auth",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:n})})];case 1:return e.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}()).catch((function(n){console.log(n)})),[2]}var s}))}));return function(){return n.apply(this,arguments)}}();(0,c.useEffect)((function(){xn.current.focus()}),[xn]);var In=function(){var n=(0,r.Z)((function(n,e){var t,o,i;return(0,a.__generator)(this,(function(c){switch(c.label){case 0:return u(n,e),w(!0),[4,(t=v.default.firestore().collection("profiles").doc(n.uid)).get()];case 1:return(o=c.sent()).exists&&o.data().handle?[3,4]:(i="",i=q.length?q.slice(0,q.indexOf("@")):"hacker",[4,v.default.firestore().collection("profiles").where("handle","==",i).limit(1).get()]);case 2:return c.sent().empty||(i+=m()()),[4,v.default.firestore().runTransaction(function(){var n=(0,r.Z)((function(n){var e;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.get(t)];case 1:return(e=r.sent()).exists?[3,3]:[4,n.set(t,{handle:i,avatar:yn[vn(0,yn.length-1)],callToActions:[],socialMedia:{}})];case 2:return r.sent(),[3,5];case 3:return e.data().handle?[3,5]:[4,n.update(t,{handle:i,avatar:yn[vn(0,yn.length-1)]})];case 4:r.sent(),r.label=5;case 5:return[2]}}))}));return function(e){return n.apply(this,arguments)}}())];case 3:c.sent(),c.label=4;case 4:return $&&"7"===$&&mn?window.open("https://app.hackernoon.com/new?template=".concat(mn),"_self"):$&&"8"===$&&tn?window.open("https://app.hackernoon.com/new?poll=".concat(tn),"_self"):window.open("".concat(V).concat($.length?"?action=".concat($):"").concat(an.length?"&emoji=".concat(an):"3"===$?"#commentSection":""),"_self"),[2]}}))}));return function(e,t){return n.apply(this,arguments)}}(),_n=function(){var n=(0,r.Z)((function(n,e){var t,r,o,i,c,s,l,u,d,h;return(0,a.__generator)(this,(function(e){switch(e.label){case 0:if(t=n.email,r=n.password,o=n.trackingOptIn,i=void 0!==o&&o,!ln)return P("You need to accept the terms and policies"),[2];w(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,v.default.firestore().collection("blacklist").where("email","==",t).limit(1).get()];case 2:if(!e.sent().empty)throw new L("That email has been blacklisted as spam. Please contact us if you have been wrongfully lynched.");return[3,4];case 3:return c=e.sent(),P(c.message),w(!1),[2];case 4:return e.trys.push([4,7,8,9]),s=v.default.auth().currentUser,[4,v.default.auth().createUserWithEmailAndPassword(t,r)];case 5:return l=e.sent(),u=l.user,d=l.credential,[4,u.sendEmailVerification({url:"https://hackernoon.com"})];case 6:if(e.sent(),s&&s.isAnonymous)try{s.linkWithCredential(d).catch((function(n){}))}catch(a){}return In(u,{trackingOptIn:i}),w(!1),[3,9];case 7:return h=e.sent(),P(h.message),[3,9];case 8:return w(!1),[7];case 9:return[2]}}))}));return function(e,t){return n.apply(this,arguments)}}(),Pn={url:window.location.href,handleCodeInApp:!0},Nn=function(){var n=(0,r.Z)((function(){var n;return(0,a.__generator)(this,(function(e){switch(e.label){case 0:w(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,v.default.firestore().collection("blacklist").where("email","==",q).limit(1).get()];case 2:if(!e.sent().empty)throw new L("That email has been blacklisted as spam. Please contact us if you have been wrongfully lynched.");return[3,4];case 3:return n=e.sent(),console.error(n),P(n.message),w(!1),[2];case 4:return v.default.auth().sendSignInLinkToEmail(q,Pn).then((function(){window.localStorage.setItem("emailForSignIn",q),U("A Magical link was sent to your email"),w(!1)})).catch((function(n){M("An error occured!"),w(!1)})),(0,C.logEvent)({category:"Magic Link",action:"SignIn",label:"Magic Link Signin from hackernoon.com"}),[2]}}))}));return function(){return n.apply(this,arguments)}}();(0,c.useState)((function(){if(v.default.auth().isSignInWithEmailLink(window.location.href)){var n=window.localStorage.getItem("emailForSignIn");n||(n=window.prompt("Please provide your email for confirmation")),v.default.auth().signInWithEmailLink(n,window.location.href).then((function(n){window.localStorage.removeItem("emailForSignIn")})).catch((function(n){console.log(n)}))}}),[]);return(0,i.jsxs)(Y,{children:[!H&&(0,i.jsxs)(g.ZP,{style:{display:"flex",flexDirection:"column",alignItems:"center"},onSubmit:pn(_n),children:[(0,i.jsx)("fieldset",{className:"loginInput",children:(0,i.jsx)("div",{className:"mt-2 shadow-sm",children:(0,i.jsx)("input",{autoComplete:n.fromColorPicker?"new-password":"on",id:"email",name:"email",type:"email",placeholder:"Email",onChange:function(n){return D(n.target.value)},ref:function(n){hn(n,{required:!0}),xn.current=n},style:n.fromColorPicker&&!e?{border:"2px solid #212428"}:{}})})}),(0,i.jsx)("fieldset",{className:"loginInput",children:(0,i.jsx)("div",{className:"mt-2 shadow-sm",children:(0,i.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",ref:hn({required:!0}),style:n.fromColorPicker&&!e?{border:"2px solid #212428"}:{}})})}),(0,i.jsx)(j,{children:(0,i.jsx)("fieldset",{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"checkbox",name:"trackingOptIn",ref:hn}),(0,i.jsx)("label",{htmlFor:"trackingOptIn",children:"Opt in to HackerNoon reading history for recommendations and more!"}),(0,i.jsx)(S.Z,{content:"We only track reading internally to give better recommendations. This is subject to the site's terms of service and privacy policy.",children:(0,i.jsx)(Z.ag,{})})]})})}),(0,i.jsxs)("footer",{children:[(0,i.jsx)(h(),{href:"/login".concat(window.location.search),prefetch:!1,children:(0,i.jsx)(b.F6,{style:{color:"white",fontSize:"12px"},small:"true",type:"button",children:"ALREADY HAVE AN ACCOUNT?"})}),(0,i.jsxs)(F,{type:"submit",disabled:f,loading:f.toString(),className:f&&"loading",onClick:function(){return n.fromColorPicker&&void(0,C.logEvent)({category:"ColorPicker",action:"Account creation",label:"Account created from Color Picker"})||n.fromStoryReactions&&void(0,C.logEvent)({category:"Story Reaction",action:"Account creation",label:"Account created from story reactions"})},children:[f&&(0,i.jsx)(Z.he,{})," ",!f&&(0,i.jsx)("span",{style:{fontWeight:"bold"},children:"CREATE ACCOUNT"})]})]}),(0,i.jsxs)("div",{style:{color:"white",fontWeight:"bold",fontSize:"16px"},children:[(0,i.jsx)("input",{checked:ln,onChange:function(){un(!ln)},type:"checkbox"})," I accept the"," ",(0,i.jsx)("a",{style:{color:"#0f0"},target:"_blank",href:"/terms",children:"terms"})," ","and"," ",(0,i.jsx)("a",{style:{color:"#0f0"},target:"_blank",href:"privacy",children:"policies"})]}),(n.fromColorPicker||n.fromStoryReactions)&&(0,i.jsxs)("div",{className:"privacy",children:[(0,i.jsx)(h(),{href:"https://hackernoon.com/privacy",prefetch:!1,children:(0,i.jsx)(b.F6,{children:"Privacy"})}),(0,i.jsx)(h(),{href:"https://hackernoon.com/privacy",children:(0,i.jsx)(b.F6,{children:"Terms"})})]}),I&&(0,i.jsx)(x.Z,{children:I})]}),!H&&(0,i.jsx)("p",{style:{fontWeight:"bold",marginLeft:"40px",marginRight:"25px",color:"#fff"},children:"OR"}),(0,i.jsxs)("div",{className:"box socials",children:[(0,i.jsx)("div",{className:"button-row--google",children:(0,i.jsxs)(W,{style:{display:"flex",justifyContent:"space-between",marginBottom:"20px"},children:[(0,i.jsx)(z,{style:{display:"flex",alignItems:"center"},className:"social",type:"button",disabled:f,onClick:wn,children:(0,i.jsx)(N(),{src:"https://cdn.hackernoon.com/images/bYnj8YlSMrbGYYve1iskmRSuqXg1-wrd2ha2.png",width:"30px",height:"30px"})}),(0,i.jsx)(z,{style:{display:"flex",alignItems:"center"},className:"social",type:"button",disabled:f,onClick:kn,children:(0,i.jsx)(Z.Ey,{width:"30",className:"loginIcon"})}),(0,i.jsx)(z,{style:{display:"flex",alignItems:"center"},className:"social",type:"button",disabled:f,onClick:jn,children:(0,i.jsx)(N(),{src:"https://cdn.hackernoon.com/images/bYnj8YlSMrbGYYve1iskmRSuqXg1-eue2hva.png",width:"30px",height:"30px"})}),(0,i.jsx)(z,{style:{display:"flex",alignItems:"center"},className:"social",type:"button",disabled:f,onClick:Sn,children:(0,i.jsx)(N(),{src:"https://cdn.hackernoon.com/images/bYnj8YlSMrbGYYve1iskmRSuqXg1-puf2hys.png",width:"30px",height:"30px"})})]})}),(0,i.jsx)(z,{style:{margin:"0 auto",marginBottom:"1rem",width:"300px",height:"43px"},className:"social magic",type:"button",disabled:f,onClick:Cn,children:"SIGN UP WITH WALLET"}),(0,i.jsx)(z,{style:{margin:"0 auto",width:"300px",height:"43px"},className:"social magic",type:"button",disabled:f,onClick:function(){return J(!H)},children:"SEND ME A MAGIC LINK"})]}),(0,i.jsxs)(_(),{isOpen:H,onRequestClose:function(){return J(!1)},contentLabel:"Magic Link signin",appElement:bn,style:{content:{width:"400px",height:"400px",margin:"0 auto",top:"200px"}},children:[(0,i.jsx)("h2",{style:{color:"#3c3c3b"},children:"Send Me a Magic Link"}),(0,i.jsxs)(g.ZP,{onSubmit:pn(Nn),children:[(0,i.jsx)("fieldset",{children:(0,i.jsx)("div",{children:(0,i.jsx)("input",{id:"email",name:"email",type:"email",placeholder:"Email",onChange:function(n){return D(n.target.value)},value:q})})}),T&&(0,i.jsx)("p",{style:{color:"#3c3c3b"},children:T}),O&&(0,i.jsxs)("p",{style:{color:"#3c3c3b"},children:[O," ","\u2728"]}),(0,i.jsx)("footer",{children:(0,i.jsxs)(b.ZP,{style:{width:"100%",display:"flex",justifyContent:"center"},onClick:function(){return Nn()},disabled:f,loading:f.toString(),className:f&&"loading",children:[f&&(0,i.jsx)(Z.he,{})," ",(0,i.jsx)("span",{children:"Send"})]})}),I&&(0,i.jsx)(x.Z,{children:I})]})]})]})}},80973:function(n,e,t){var r=t(7297);function o(){var n=(0,r.Z)(["\n  border-radius: 2px;\n  padding: 0.8rem;\n  background: ",";\n  margin: 0 0 1.2rem;\n  font-size: 1.4rem;\n  border: 2px solid\n    ",";\n  color: ",";\n\n  p {\n    margin: 0 0 1.2rem;\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n\n  a {\n    text-decoration: underline;\n    color: inherit;\n    cursor: pointer;\n  }\n\n  h3 {\n    font-size: 1.8rem;\n    margin: 0 0 0.6rem;\n    text-align: left;\n  }\n\n  strong {\n    margin-right: 1rem;\n  }\n"]);return o=function(){return n},n}var a=t(27603).default.div.withConfig({componentId:"sc-c2589523-0"})(o(),(function(n){return"info"===n.color?n.theme.veryDarkGreen:"yellow"===n.color?"#f5ec43":n.theme.lightRed}),(function(n){return"info"===n.color?n.theme.green:"yellow"===n.color?"#f5ec43":n.theme.red}),(function(n){return"info"===n.color?n.theme.green:"yellow"===n.color?"#666105":n.theme.darkRed}));e.Z=a}}]);