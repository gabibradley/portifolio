"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6691],{21103:function(n,e,t){t.d(e,{Z:function(){return w}});var r=t(47568),a=t(7297),o=t(29815),c=t(20414),i=t(85893),s=t(67294),l=t(27603),d=t(92626),h=t(29689),u=t(60204),p=t(85434);function m(){var n=(0,a.Z)(["\n  .reaction {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    align-content: center;\n  }\n  .reaction > div {\n    margin: 6px;\n  }\n  .hotStory {\n    border: 1px solid #ffba00;\n    border-radius: 10px;\n    animation: change-border 4s ease-in forwards;\n  }\n  .left {\n    display: block;\n    flex-grow: 0;\n    flex-shrink: 1;\n    flex-basis: auto;\n    align-self: auto;\n    order: 0;\n    width: 400px;\n    background-color: ",";\n  }\n  .right {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .right > div {\n    margin: 0 3px;\n  }\n\n  .story {\n    display: flex;\n    align-items: center;\n    color: #63ff86;\n    text-decoration: none;\n    line-height: 1.3;\n    font-size: 14px;\n  }\n\n  .story .img {\n    height: 80px;\n    width: 150px;\n    min-width: 150px;\n    object-fit: cover;\n  }\n\n  .story span {\n    margin: 0 15px;\n  }\n\n  .story:hover {\n    transition: all 0.3s ease-in-out;\n    transform: scale(1.03);\n  }\n\n  .story-title {\n    color: ",";\n  }\n\n  .story-title:hover {\n    text-decoration: underline;\n  }\n\n  .avatar {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    box-shadow: ",";\n  }\n\n  .avatar img {\n    width: 50px;\n    height: 50px;\n    background-size: cover;\n  }\n\n  .wrap {\n    height: 30px;\n    margin-right: 5px;\n    -webkit-filter: ",";\n  }\n\n  .arrow {\n    color: ",";\n  }\n\n  @keyframes change-border {\n    0% {\n      transform: scale(1);\n    }\n    25% {\n      transform: scale(1.15);\n    }\n    50% {\n      transform: scale(1.2);\n    }\n    75% {\n      transform: scale(1.15);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n"]);return m=function(){return n},n}var g=l.default.div.withConfig({componentId:"sc-1ba0f417-0"})(m(),(function(n){var e=n.theme;return n.darkMode?e.featuredBlack:"#d6d6d6"}),(function(n){var e=n.theme;return n.darkMode?e.newGreen:e.veryDarkGreen}),(function(n){var e=n.theme;return n.darkMode?"0 0.15em ".concat(e.newGreen,", 0 -0.15em ").concat(e.newGreen,", 0.15em 0 ").concat(e.newGreen,", -0.15em 0 ").concat(e.newGreen):"0 0.15em ".concat(e.veryDarkGreen,", 0 -0.15em ").concat(e.veryDarkGreen,", 0.15em 0 ").concat(e.veryDarkGreen,", -0.15em 0 ").concat(e.veryDarkGreen)}),(function(n){var e=n.theme;return n.darkMode?"drop-shadow(1px 1px 0 ".concat(e.newGreen,") drop-shadow(-1px -1px 0 ").concat(e.newGreen,") drop-shadow(1px -1px 0 ").concat(e.newGreen,")\n      drop-shadow(-1px 1px 0 ").concat(e.newGreen,")"):"drop-shadow(1px 1px 0 ".concat(e.veryDarkGreen,") drop-shadow(-1px -1px 0 ").concat(e.veryDarkGreen,") drop-shadow(1px -1px 0 ").concat(e.veryDarkGreen,")\n      drop-shadow(-1px 1px 0 ").concat(e.veryDarkGreen,")")}),(function(n){var e=n.theme;return n.darkMode?e.newGreen:e.veryDarkGreen})),f=function(n){var e=n.data,t=void 0===e?{}:e,r=(0,h.Z)(!0).value;return(0,i.jsx)(g,{className:"item",darkMode:r,children:(0,i.jsxs)("div",{className:"reaction ".concat(t.reactionsTotal>=20&&"hotStory"),children:[(0,i.jsx)("div",{className:"left",children:(0,i.jsxs)("a",{className:"story",href:"https://hackernoon.com/".concat(t.slug),target:"_blank",onClick:function(){(0,u.logEvent)({category:"Live-Reactions",action:"Clicked on a title"})},children:[(0,i.jsx)("img",{className:"img",src:t.mainImage}),(0,i.jsx)("span",{className:"story-title",children:t.reactionsTotal>=20?"\ud83e\udd13 (+".concat(t.reactionsTotal,") ").concat(t.title):t.title})]})}),(0,i.jsxs)("div",{className:"right",children:[(0,i.jsx)("div",{className:"avatar",children:(0,i.jsx)("a",{style:{height:"50px",backgroundColor:"#fff"},href:"https://hackernoon.com/u/".concat(t.reader.handle),target:"_blank",children:(0,i.jsx)("img",{src:t.reader.avatar})})}),(0,i.jsx)("div",{children:(0,i.jsx)(p.FM,{})}),(0,i.jsx)("div",{className:"wrap",children:(0,i.jsx)("img",{src:"https://hackernoon.com/emojis/".concat(t.reader.emoji,".png"),width:"35",height:"40"})}),(0,i.jsx)("div",{children:(0,i.jsx)(p.FM,{})}),(0,i.jsx)("div",{className:"avatar",children:(0,i.jsx)("a",{style:{height:"50px"},href:"https://hackernoon.com/u/".concat(t.writer.handle),target:"_blank",children:(0,i.jsx)("img",{src:t.writer.avatar})})})]})]})})};function v(){var n=(0,a.Z)(["\n  .nav {\n    margin: 20px 0;\n    color: ",";\n    font-weight: bold;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .nav h2 {\n    margin: 0 20px;\n  }\n\n  .nav .divider {\n    height: 1px;\n    background-color: ",";\n    flex-grow: 1;\n  }\n\n  .announcement {\n    text-align: center;\n    margin-bottom: 5px;\n    color: #949494;\n    font-size: 15px;\n  }\n\n  .btn-wrapper {\n    text-align: center;\n    padding: 20px;\n  }\n\n  .btn-wrapper > * {\n    margin: 5px;\n  }\n\n  .loading-btn-wrapper {\n    display: none !important;\n  }\n\n  .btn {\n    color: ",";\n    background-color: ",";\n    padding: 0.25em 0.5em;\n    margin-top: 10px;\n    border: ",";\n    display: inline-block;\n  }\n\n  .btn:hover {\n    background-color: ",";\n    cursor: pointer;\n    transition: all 0.5s ease-in-out;\n    transform: scale(1.1);\n  }\n\n  .item:nth-child(1) {\n    opacity: 0;\n    display: none;\n  }\n\n  ",";\n"]);return v=function(){return n},n}var x=l.default.div.withConfig({componentId:"sc-fc2e5bdd-0"})(v(),(function(n){var e=n.theme;return n.darkMode?e.newGreen:e.veryDarkGreen}),(function(n){var e=n.theme;return n.darkMode?e.newGreen:e.veryDarkGreen}),(function(n){var e=n.theme;return n.darkMode?e.newGreen:e.veryDarkGreen}),(function(n){var e=n.theme;return n.darkMode?e.featuredBlack:"#d6d6d6"}),(function(n){n.theme;return n.darkMode?"3px solid rgb(0, 255, 0)":"3px solid #009800"}),(function(n){n.theme;return n.darkMode?"#035203":"#8dff78"}),(function(n){n.theme;return n.pause?".stream{\n        overflow: auto;\n        height: 500px;\n      }\n    ":"\n    .item:nth-child(2) {\n      animation: fadeIn 2s 0s ease-in-out;\n    }\n    .item:nth-child(4) {\n      opacity: 0.8;\n    }\n  \n    .item:nth-child(5) {\n      opacity: 0.5;\n    }\n  \n    .item:nth-child(6) {\n      opacity: 0.3;\n    }\n  \n    .item:nth-child(7) {\n      opacity: 0;\n      display: none;\n    }\n  \n    @keyframes fadeIn{\n      100%{\n        opacity: 1;\n      }\n      0%{\n        opacity: 0;\n      }\n    }\n    "})),k=4600,w=function(n){var e=n.reactions,t=(0,h.Z)(!0).value,a=(0,s.useState)(Date.now()),l=a[0],u=a[1],p=(0,s.useState)(e.slice(-13)),m=p[0],g=p[1],v=(0,s.useState)(e.slice(0,7)),w=v[0],b=v[1],y=(0,s.useState)(0),j=y[0],D=y[1],N=(0,s.useState)(!0),M=N[0],S=N[1],_=(0,s.useState)([]),I=_[0],Z=_[1],G=(0,s.useState)(new Date),T=G[0],R=G[1],A=(0,s.useState)([]),E=A[0],C=A[1],O=(0,s.useState)({loading:!1,loaded:!1}),P=O[0],U=O[1],H=(0,s.useRef)(null),K=function(){var n=(0,r.Z)((function(n){return(0,c.__generator)(this,(function(e){return g(n),D(0),[2]}))}));return function(e){return n.apply(this,arguments)}}(),L=function(){var n=(0,r.Z)((function(){var n,e,t;return(0,c.__generator)(this,(function(r){return n=Date.now(),e=(n-l-k)/1e3,(t=new Date).setUTCSeconds(t.getUTCSeconds()-e),u(n),[2,{startDate:new Date(t),endDate:new Date}]}))}));return function(){return n.apply(this,arguments)}}(),V=function(){var n=(0,r.Z)((function(){var n,e;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return j<m.length?(function(n){E.length<60&&C([w[w.length-1]].concat((0,o.Z)(E)));var e=w;e.unshift(n),e.pop(),b(e)}(m[j]),D(j+1),[3,5]):[3,1];case 1:return[4,L()];case 2:return n=t.sent(),[4,(0,d.getNewReactionsData)(n,13)];case 3:return e=t.sent(),[4,K(e)];case 4:t.sent(),t.label=5;case 5:return[2]}}))}));return function(){return n.apply(this,arguments)}}(),B=function(){clearInterval(H.current),S(!1)},z=function(){if(M)return H.current=setInterval(V,k),function(){return clearInterval(H.current)};S(!0)},F=function(){var n=(0,r.Z)((function(n){var e,t,r,a,o,i,s,l,h;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return e=T.getFullYear(),t=T.getMonth()+1,r=T.getDate(),a=T.getHours(),o=T.getMinutes(),i=T.getSeconds(),(s=new Date("".concat(e,"-").concat(t,"-").concat(r,",  ").concat(a,":").concat(o,":").concat(i))).setMinutes(o-2),l={startDate:s,endDate:T},[4,(0,d.getNewReactionsData)(l,n)];case 1:return h=c.sent(),R(s),[2,h]}}))}));return function(e){return n.apply(this,arguments)}}(),W=function(){var n=(0,r.Z)((function(){var n;return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return 7===w.length&&Z(w),E.length>0?(b((0,o.Z)(w).concat((0,o.Z)(E))),C([]),[3,3]):[3,1];case 1:return[4,F(7)];case 2:n=e.sent(),b((0,o.Z)(w).concat((0,o.Z)(n))),e.label=3;case 3:return U({loading:!1,loaded:!0}),[2]}}))}));return function(){return n.apply(this,arguments)}}(),Y=function(){var n=(0,r.Z)((function(){return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return U({loading:!0,loaded:!1}),B(),[4,W()];case 1:return n.sent(),[2]}}))}));return function(){return n.apply(this,arguments)}}(),q=function(){U({loading:!1,loaded:!1}),z(),b(I),Z([])};return(0,s.useEffect)((function(){if(M)return H.current=setInterval(V,k),function(){return clearInterval(H.current)}}),[M,j]),(0,i.jsx)(x,{darkMode:t,pause:!M,children:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("div",{className:"nav",children:[(0,i.jsx)("div",{className:"divider"}),(0,i.jsx)("h2",{children:"LIVE STORY REACTIONS"}),(0,i.jsx)("div",{className:"divider"})]}),m.length-j===0?(0,i.jsx)("div",{style:{textAlign:"center"},children:(0,i.jsx)("img",{src:"https://hackernoon.com/watch-gif.gif",alt:"loading",width:"100",height:"100"})}):(0,i.jsx)("p",{className:"announcement",children:"What the beautiful humans of HackerNoon give af about rn"}),(0,i.jsx)("div",{className:"stream",children:w.map((function(n){return(0,i.jsx)(f,{data:{storyReactions:n.storyReactions,title:n.title,slug:n.slug,mainImage:n.mainImage,reader:n.reader,writer:n.writer,reactionsTotal:n.reactionsTotal||0}},n.componentKey)}))}),m.length-j!==0?(0,i.jsxs)("div",{className:"btn-wrapper",children:[!P.loaded&&!P.loading&&(0,i.jsx)("button",{className:"btn",onClick:M?B:z,children:M?"PAUSE STREAM":"RESUME STREAM"}),P.loading?(0,i.jsx)("img",{src:"https://hackernoon.com/watch-gif.gif",alt:"loading",width:"50",height:"50"}):P.loaded?(0,i.jsx)("div",{children:w.length>=60?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Ohh no, max ammount reached!"}),(0,i.jsx)("button",{className:"btn",onClick:q,children:"BACK TO NORMAL"})]}):(0,i.jsxs)("div",{className:"btn-wrapper",children:[(0,i.jsx)("p",{children:(0,i.jsx)("small",{children:"Scroll down to see previous reactions!"})}),(0,i.jsx)("button",{className:"btn",onClick:q,children:"BACK TO NORMAL"}),(0,i.jsx)("button",{className:"btn",onClick:Y,children:"LOAD PREVIOUS"})]})}):(0,i.jsx)("button",{className:"btn",onClick:Y,children:"LOAD PREVIOUS"})]}):(0,i.jsx)("div",{className:"btn-wrapper"})]})})}},92626:function(n,e,t){t.r(e),t.d(e,{__N_SSP:function(){return x},getNewReactionsData:function(){return w},getRandomReactions:function(){return k}});var r=t(47568),a=t(29815),o=t(20414),c=t(85893),i=t(67294),s=t(9008),l=t.n(s),d=t(13674),h=t(21103),u=t(83916),p=t(60204),m=["heart","light","boat","money"],g=function(){var n=["https://cdn.hackernoon.com/avatars/robot-a1.png","https://cdn.hackernoon.com/avatars/robot-a2.png","https://cdn.hackernoon.com/avatars/robot-a3.png","https://cdn.hackernoon.com/avatars/robot-a4.png","https://cdn.hackernoon.com/avatars/robot-a5.png","https://cdn.hackernoon.com/avatars/robot-a6.png","https://cdn.hackernoon.com/avatars/robot-b1.png","https://cdn.hackernoon.com/avatars/robot-b2.png","https://cdn.hackernoon.com/avatars/robot-b3.png","https://cdn.hackernoon.com/avatars/robot-b4.png","https://cdn.hackernoon.com/avatars/robot-b5.png","https://cdn.hackernoon.com/avatars/robot-b6.png"],e=n.length-1;return n[Math.floor(Math.random()*(e-0+1))+0]},f=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},v=function(){var n=(0,r.Z)((function(n,e){var t,r,a,c,i,s,l,d,h,u,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,n.collection("stories").where("slug","==",e).limit(1)];case 1:return[4,o.sent().get().catch((function(n){console.error("Error getting document",n)}))];case 2:return t=o.sent(),r={},t.docs[0]&&!t.docs[0].empty&&(a=t.docs[0].data(),c=a.title,i=a.mainImage,s=a.profile,l=s.avatar,d=s.handle,h={avatar:l||g(),handle:d||"hackernoon"},u={avatar:g(),handle:"hackernoon",emoji:m[m.length*Math.random()<<0]},p=i?i.includes("https")?i:"https://hackernoon.com/".concat(i):"https://hackernoon.com/images/ugoTV1vwcgR4mN8MMDUUN4vt6p02-nf6p33px.jpeg",r={slug:e||"hackernoon",title:c||"HackerNoon Partners with Digg to Improve Story Distribution",mainImage:p||"https://hackernoon.com/fallback-feat.png",reader:u,writer:h,componentKey:"id"+Math.random().toString(16).slice(2)}),[2,r]}}))}));return function(e,t){return n.apply(this,arguments)}}(),x=!0,k=function(){var n=(0,r.Z)((function(n){var e,t,a,c,i,s,l;return(0,o.__generator)(this,(function(d){switch(d.label){case 0:return[4,(0,u.default)()];case 1:return[4,(e=d.sent()).firestore()];case 2:return t=d.sent(),c=f(1,7),i=new Date((new Date).setDate((new Date).getDate()-c)),s=e.firestore.Timestamp.fromDate(i),[4,t.collection("story-reactions").where("updatedAt",">=",s).orderBy("updatedAt","desc").limit(n)];case 3:return[4,d.sent().get().catch((function(n){console.error("Error getting document",n)}))];case 4:return a=d.sent(),l=a.docs.map(function(){var n=(0,r.Z)((function(n){var e,r,a,c,i,s,l,d,h,u,p,x;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e=n.data(),r=e.title,a=e.mainImage,c=e.total,i=e.owner,s=e.readers,i||s||r||a?[3,2]:[4,v(t,n.id)];case 1:return l=o.sent(),0===Object.keys(l).length&&(d={avatar:g(),handle:"hackernoon"},h={avatar:g(),handle:"hackernoon",emoji:m[f(0,3)]},l={title:"HackerNoon Partners with Digg to Improve Story Distribution",mainImage:"https://hackernoon.com/images/ugoTV1vwcgR4mN8MMDUUN4vt6p02-nf6p33px.jpeg",reader:h,reactionsTotal:0,writer:d,componentKey:"id"+Math.random().toString(16).slice(2)}),[2,l];case 2:return s&&(p=f(0,s.length-1),u=s[p]),u||(u={avatar:g(),handle:"hackernoon",emoji:m[f(0,3)]}),null!==u.handle&&void 0!==u.handle&&0!==u.handle.length||(u.handle="hackernoon"),delete u.createdAt,i&&0!==Object.keys(i).length?(x=i).handle||(x.handle="hackernoon"):x={avatar:g(),handle:"hackernoon"},[2,{slug:n.id,reactionsTotal:c||0,title:r||"HackerNoon Partners with Digg to Improve Story Distribution",mainImage:a||"https://hackernoon.com/fallback-feat.png",reader:u,writer:x,componentKey:"id"+Math.random().toString(16).slice(2)}]}}))}));return function(e){return n.apply(this,arguments)}}()),[4,Promise.all(l)];case 5:return[2,d.sent()]}}))}));return function(e){return n.apply(this,arguments)}}(),w=function(){var n=(0,r.Z)((function(n,e){var t,c,i,s,l,d,h,p,f,x;return(0,o.__generator)(this,(function(w){switch(w.label){case 0:return[4,(0,u.default)()];case 1:return[4,(t=w.sent()).firestore()];case 2:return c=w.sent(),i=t.firestore.Timestamp.fromDate(n.startDate),s=t.firestore.Timestamp.fromDate(n.endDate),[4,c.collection("story-reactions").where("updatedAt",">=",i).where("updatedAt","<=",s).orderBy("updatedAt","desc").limit(e)];case 3:return[4,w.sent().get().catch((function(n){console.error("Error getting document",n)}))];case 4:return(l=w.sent()).docs.length<3?[4,k(e)]:[3,6];case 5:return[2,w.sent()];case 6:return d=l.docs.map(function(){var e=(0,r.Z)((function(e){var t,r,a,i,s,l,d,h,u,p,f,x;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.data(),r=t.title,a=t.mainImage,i=t.total,s=t.owner,l=t.readers,s||l||r?[3,2]:[4,v(c,e.id)];case 1:return d=o.sent(),0===Object.keys(d).length&&(h={avatar:g(),handle:"hackernoon"},u={avatar:g(),handle:"hackernoon",emoji:m[m.length*Math.random()<<0]},d={title:"HackerNoon Partners with Digg to Improve Story Distribution",mainImage:"https://hackernoon.com/images/ugoTV1vwcgR4mN8MMDUUN4vt6p02-nf6p33px.jpeg",reader:u,writer:h,componentKey:"id"+Math.random().toString(16).slice(2)}),[2,[d]];case 2:return p=l?l.filter((function(e){return e.createdAt.toDate()>=n.startDate})):[{avatar:g(),handle:"hackernoon",emoji:m[m.length*Math.random()<<0]}],f=s&&0!==Object.keys(s).length?s:{avatar:g(),handle:"hackernoon"},x=[],p.forEach((function(n){delete n.createdAt,x.push({slug:e.id,reactionsTotal:i,title:r||"HackerNoon Partners with Digg to Improve Story Distribution",mainImage:a||"https://hackernoon.com/fallback-feat.png",reader:n,writer:f,componentKey:"id"+Math.random().toString(16).slice(2)})})),[2,x]}}))}));return function(n){return e.apply(this,arguments)}}()),[4,Promise.all(d)];case 7:return h=w.sent(),p=h.flat(),(p=(0,a.Z)(new Map(p.map((function(n){return[n.slug,n]}))).values())).length<e?(f=e-p.length,[4,k(f)]):[3,9];case 8:return x=w.sent(),x=(0,a.Z)(new Map(x.map((function(n){return[n.slug,n]}))).values()),[2,(0,a.Z)(p).concat((0,a.Z)(x))];case 9:return[2,p];case 10:return[2]}}))}));return function(e,t){return n.apply(this,arguments)}}();e.default=function(n){var e=n.data;return(0,i.useEffect)((function(){(0,p.logPageView)()}),[]),(0,c.jsxs)(d.ZP,{children:[(0,c.jsxs)(l(),{children:[(0,c.jsx)("title",{children:"#live-reactions-hackernoon"}),(0,c.jsx)("meta",{name:"description",content:"Watch live reaction of HackerNoon posts."},"description"),(0,c.jsx)("meta",{property:"og:title",content:"#live-reactions-hackernoon"},"ogTitle"),(0,c.jsx)("meta",{property:"og:description",content:"Watch live reaction of HackerNoon posts."},"ogDescription"),(0,c.jsx)("link",{rel:"canonical",href:"https://hackernoon.com/live"},"canonicalLink")]}),e&&(0,c.jsx)(h.Z,{reactions:e})]})}}}]);